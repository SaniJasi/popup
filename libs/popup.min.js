function popup(){function t(){$(p).addClass(s)}function e(){$(p).removeClass(s)}function o(){$(p).removeAttr("style")}function n(){$("."+c).fadeOut()}function i(){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}var p="body",s="body-hidden",c="popup-box",a="popup",r="popup__close",d="is-visible",l="popup-box__container",u="popup-box__bg",f="popup-open";$("."+a).each(function(){var e=$(this);e.hasClass("."+d)?(e.wrap('<div class="'+c+" "+d+'"><div class="'+l+'">'),t(),e.removeClass("."+d)):e.wrap('<div class="'+c+'"><div class="'+l+'">'),e.after('<div class="'+u+'">'),e.parents("."+c).attr("id",e.attr("id")),e.removeAttr("id"),console.log("init popop")}),$("."+u).on("touchstart click",function(t){t.preventDefault(),n(),e(),o()}),$(document).keydown(function(t){27==t.keyCode&&(n(),e(),o(),t.preventDefault())}),$("."+f).on("click",function(e){e.preventDefault(),$("."+c).length&&(n(),$($(this).attr("href")).fadeIn(),t(),$(p).css("margin-right",i()))}),$("."+r).on("click",function(t){t.preventDefault(),n(),e(),o()})}