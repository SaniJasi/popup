function popup(){function o(){$(s).addClass(p)}function e(){$(s).removeClass(p)}function t(){$(s).removeAttr("style")}function n(){$("."+c).fadeOut()}function i(){var o=document.createElement("div");o.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(o);var e=o.offsetWidth-o.clientWidth;return document.body.removeChild(o),e}var s="body",p="body-hidden",c="popup-box",l="popup",a="popup__close",r="is-visible",d="popup-box__container",u="popup-box__bg",v="popup-open";$("."+l).each(function(){var e=$(this);e.hasClass(r)?(console.log("is visible"),e.wrap('<div class="'+c+" "+r+'"><div class="'+d+'">'),o(),e.removeClass(r),console.log("is visible")):e.wrap('<div class="'+c+'"><div class="'+d+'">'),e.after('<div class="'+u+'">'),e.parents("."+c).attr("id",e.attr("id")),e.removeAttr("id"),console.log("init popop")}),$("."+u).on("touchstart click",function(o){o.preventDefault(),n(),e(),t()}),$(document).keydown(function(o){27==o.keyCode&&(n(),e(),t(),o.preventDefault())}),$("."+v).on("click",function(e){e.preventDefault(),$("."+c).length&&(n(),$($(this).attr("href")).fadeIn(),o(),$(s).css("margin-right",i()))}),$("."+a).on("click",function(o){o.preventDefault(),n(),e(),t()})}popup();